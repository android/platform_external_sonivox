{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "952458fb_e316f4b7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2021-04-21T04:35:27Z",
      "side": 1,
      "message": "(seems I never published this gerrit review)",
      "revId": "2e7bd2c29163fda24e78981ea5ea709dc7444af8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "607af795_8833ca0a",
        "filename": "arm-wt-22k/lib_src/eas_wtsynth.c",
        "patchSetId": 2
      },
      "lineNbr": 487,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2021-04-15T17:26:55Z",
      "side": 1,
      "message": "not convinced that INT32_MIN is the correct value here.\n\nif numSamples\u003c\u003c  is large positive and phaseFrac is negative.\nwe can overflow in the other direction -- in which case it would seem that INT32_MAX is appropriate.\n\nfeels like perhaps right calculation is more like:\n   phaseFrac\u003e0 ? INT32_MIN : INT32_MAX",
      "range": {
        "startLine": 487,
        "startChar": 12,
        "endLine": 487,
        "endChar": 35
      },
      "revId": "2e7bd2c29163fda24e78981ea5ea709dc7444af8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "27d430cd_1fa26382",
        "filename": "arm-wt-22k/lib_src/eas_wtsynth.c",
        "patchSetId": 2
      },
      "lineNbr": 487,
      "author": {
        "id": 1859273
      },
      "writtenOn": "2021-04-16T05:55:52Z",
      "side": 1,
      "message": "pWTVoice-\u003ephaseFrac\u0027s data type is \"unsigned long\", hence, it\u0027s value can never be negative. So, seems like overflow can happen only in 1 direction.",
      "parentUuid": "607af795_8833ca0a",
      "range": {
        "startLine": 487,
        "startChar": 12,
        "endLine": 487,
        "endChar": 35
      },
      "revId": "2e7bd2c29163fda24e78981ea5ea709dc7444af8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6d498866_19c371cd",
        "filename": "arm-wt-22k/lib_src/eas_wtsynth.c",
        "patchSetId": 2
      },
      "lineNbr": 487,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2021-04-21T04:26:48Z",
      "side": 1,
      "message": "Posting Ray\u0027s comment on the bug for visibility here\n\n      numSamples \u003d (EAS_I32) ((numSamples \u003c\u003c NUM_PHASE_FRAC_BITS) - pWTVoice-\u003ephaseFrac);\n                            \u003c--- \u0027numSamples\u0027 is of type EAS_I32 (signed long), and \u0027pWTVoice-\u003ephaseFrac\u0027 is of type EAS_U32 (unsigned long).\n                                   Hence the subtraction result is implicitly casted to \u0027unsigned long\u0027, leading to unsigned integer overflow.\n\nthe underflow we\u0027re talking about here is that the subtraction crosses 0?   or -2^31.\nas i read the analysis, i\u0027m thinking it\u0027s as it crosses 0.  [and it may be as simple as casting phaseFrac as a signed value [assuming that it\u0027s range doesn\u0027t go about 2^31)",
      "parentUuid": "27d430cd_1fa26382",
      "range": {
        "startLine": 487,
        "startChar": 12,
        "endLine": 487,
        "endChar": 35
      },
      "revId": "2e7bd2c29163fda24e78981ea5ea709dc7444af8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b9dadd1f_17ec5bba",
        "filename": "arm-wt-22k/lib_src/eas_wtsynth.c",
        "patchSetId": 2
      },
      "lineNbr": 487,
      "author": {
        "id": 1047003
      },
      "writtenOn": "2021-04-21T04:27:59Z",
      "side": 1,
      "message": "Ayush,\nCan you check what were the values of pWTVoice-\u003ephaseFrac and numSamples when the overflow was seen?\nAnd also look at what is the max for phaseFrac",
      "parentUuid": "6d498866_19c371cd",
      "range": {
        "startLine": 487,
        "startChar": 12,
        "endLine": 487,
        "endChar": 35
      },
      "revId": "2e7bd2c29163fda24e78981ea5ea709dc7444af8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fa55ccbe_8461e784",
        "filename": "arm-wt-22k/lib_src/eas_wtsynth.c",
        "patchSetId": 2
      },
      "lineNbr": 487,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2021-04-21T04:35:27Z",
      "side": 1,
      "message": "my mistake -- i thought I looked at the declaration and saw \"EAS_I32\"\nbut i see \"EAS_U32\" when i looked just now.\n\nre-reading the bug report -- it\u0027s unclear to me whether the problem is\nthat this went past INT32_MIN or....\nsince the operation was I32 - U32, things get carried out as \"u32\", meaning unsigned.... which means the failure scenario was as we crossed 0, not -2^31\n\nthe security team analysis leads me to think the failure point is as it crossed\n0.",
      "parentUuid": "27d430cd_1fa26382",
      "range": {
        "startLine": 487,
        "startChar": 12,
        "endLine": 487,
        "endChar": 35
      },
      "revId": "2e7bd2c29163fda24e78981ea5ea709dc7444af8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "890f56da_e1912c08",
        "filename": "arm-wt-22k/lib_src/eas_wtsynth.c",
        "patchSetId": 2
      },
      "lineNbr": 487,
      "author": {
        "id": 1859273
      },
      "writtenOn": "2021-04-22T15:28:06Z",
      "side": 1,
      "message": "During overflow, the values observed for numSamples and phaseFrac are 0 and 6200 respectively.\n \nThe specs doesn\u0027t limit the value that phaseFrac can take. After code analysis, I deduced that phaseFrac can take max upto 23 bits.\n \nSince this is less than 32 bits, we can cast phaseFrac to signed. The change would be:\n\nnumSamples \u003d (numSamples \u003c\u003c NUM_PHASE_FRAC_BITS) - (EAS_I32) pWTVoice-\u003ephaseFrac;",
      "parentUuid": "fa55ccbe_8461e784",
      "range": {
        "startLine": 487,
        "startChar": 12,
        "endLine": 487,
        "endChar": 35
      },
      "revId": "2e7bd2c29163fda24e78981ea5ea709dc7444af8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6aabef8a_33b6aa62",
        "filename": "arm-wt-22k/lib_src/eas_wtsynth.c",
        "patchSetId": 2
      },
      "lineNbr": 494,
      "author": {
        "id": 1108919
      },
      "writtenOn": "2021-04-15T17:26:55Z",
      "side": 1,
      "message": "if we set to INT32_MIN as suggested to the new patch,\nthis is always going to declare an error.",
      "range": {
        "startLine": 494,
        "startChar": 7,
        "endLine": 494,
        "endChar": 42
      },
      "revId": "2e7bd2c29163fda24e78981ea5ea709dc7444af8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}